# API Versioning Strategy

## Current Implementation

WebSearchIndexing API ???????????? URL-based ????????????? ? ????????? ?????? ? ????????.

### ?????? ??????

```
/api/v{major}/module/endpoint
```

**????????:**
- `/api/v1/core/settings` - ???????????? ??????? v1
- `/api/v1/catalog/sites` - ??????? ?????? v1  
- `/api/v1/reporting/stats` - ????? v1

### ??????? ??????

#### v1 (Current)
- **Status**: Stable
- **Modules**: Core, Catalog, Reporting
- **Features**:
  - Rate limiting (100 requests/min)
  - Correlation ID tracking
  - Problem Details error format
  - OpenAPI/Swagger documentation

### ??????? ?????????????

1. **Major versions** - ??? breaking changes
2. **URL path versioning** - ??? ???????? ?? ?????????
3. **Backwards compatibility** - ????????? ?????????? ?????? ???????? 2 major releases

### ???????????? ?????????

```http
X-Correlation-ID: <guid>     # ????????????, ??????????? ???????????
Accept: application/json      # ????'???????
Content-Type: application/json # ??? POST/PUT ???????
```

### Rate Limiting

- **Limit**: 100 requests/min per client
- **Headers**:
  - `X-RateLimit-Limit`: ????? ???????
  - `X-RateLimit-Remaining`: ?????????? ???????  
  - `X-RateLimit-Reset`: ??? ????????
- **429 Response**: ??????? `Retry-After` header

### Error Responses

??? ??????? ???????????? ? ??????? RFC 7807 Problem Details:

```json
{
  "type": "https://tools.ietf.org/html/rfc7231#section-6.5.1",
  "title": "Bad Request",
  "detail": "RequestsPerDay must be greater than 0",
  "status": 400,
  "instance": "/api/v1/core/settings",
  "correlationId": "12345678-1234-1234-1234-123456789012",
  "timestamp": "2025-11-03T00:00:00Z"
}
```

### Migration Planning

??? ????????? ????? major ??????:

1. ?????? ????? URL prefix (`/api/v2/...`)
2. Implement ???? endpoints ? ??????? ??????
3. ??????? Swagger ????????????
4. ??????????? ???????? ?????????? ??? ??????????? ??????
5. ?????? deprecation notices ? ????????????

### Future Enhancements

- [ ] API key authentication
- [ ] Client-specific rate limits
- [ ] GraphQL endpoint
- [ ] Real-time subscriptions via SignalR
