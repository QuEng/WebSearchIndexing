@using System.Reflection
@using WebSearchIndexing.BuildingBlocks.Web

<Router AppAssembly="typeof(App).Assembly" AdditionalAssemblies="_componentAssemblies">
    <Found Context="routeData">
        <RouteView RouteData="routeData" DefaultLayout="typeof(MainLayout)" />
        <FocusOnNavigate RouteData="routeData" Selector="h1" />
    </Found>
    <NotFound>
        <LayoutView Layout="typeof(MainLayout)">
            <MudText Typo="Typo.h5">Sorry, we could not find that page.</MudText>
        </LayoutView>
    </NotFound>
</Router>


@code
{
    [Inject]
    private IEnumerable<IRazorComponentAssemblyProvider> RazorComponentAssemblyProviders { get; set; } = default!;
    private Assembly[] _componentAssemblies = [];

    protected override void OnInitialized()
    {
        _componentAssemblies = RazorComponentAssemblyProviders
            .Select(provider => provider.Assembly)
            .Where(assembly => assembly != typeof(App).Assembly)
            .ToArray();
    }
}